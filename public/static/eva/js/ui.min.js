(function(){var methods={obj:{},config:{pathUiBase:["/lib/js/bootstrap/bootstrap.min.js"],pathJqueryUi:["/javascripts/jquery/jquery-ui.js","/javascripts/jquery/jquery-ui-i18n.js","/javascripts/jquery/jquery-ui-custom.js"],pathCodeMirror:["/lib/js/codemirror/lib/codemirror.js"],pathSwfUploader:["/javascripts/jquery/jquery.swfupload.js","/javascripts/swfupload/swfupload.js","/javascripts/swfupload/swfupload.queue.js"],pathDatepiker:["/lib/js/bootstrap/datepicker/bootstrap-datepicker.js"],pathFileUploader:["/lib/js/jstemplates/tmpl.js","/lib/js/loadimage/load-image.js","/lib/js/upload/js/vendor/jquery.ui.widget.js","/lib/js/upload/js/jquery.iframe-transport.js","/lib/js/upload/js/jquery.fileupload.js","/lib/js/upload/js/jquery.fileupload-fp.js","/lib/js/upload/js/jquery.fileupload-ui.js","/lib/js/upload/js/locale.js","/lib/js/upload/js/main.js"],pathTinymce:"/lib/js/tiny_mce/jquery.tinymce.js"},_itemClass:{accordion:".accordion",button:".button",progressbar:".progressbar",dialog:".dialog",panel:".panel",tabs:".tabs",grid:".grid",datepicker:".datepicker",codeeditor:".editor-code",markdowneditor:".editor-markdown",fileuploader:".fileuploader",htmleditor:".editor-html"},_getOption:function(item,setting){var option=setting?setting:{};var innerOption=$(item).attr("data-ui");setting=innerOption===undefined?{}:$.parseJSON(innerOption);for(var i in setting){option[i]=setting[i]}return option},callback:function(item){var option=methods._getOption(item);if(!option||option.callback===undefined||!option.callback){return false}try{eval(option.callback+"(item)")}catch(err){eva.p(err)}return false},initAccordion:function(setting){$(this._itemClass.accordion).each(function(){var option=methods._getOption(this,setting);$(this).accordion(option);methods.callback(this)})},initButton:function(setting){$(this._itemClass.button).each(function(){$(this).button(methods._getOption(this,setting))})},initButtonset:function(setting){$(this._itemClass.buttonset).each(function(){$(this).buttonset(methods._getOption(this,setting))})},initDialog:function(setting){$(this._itemClass.dialog).each(function(){$(this).dialog(methods._getOption(this,setting))});$(".dialog_handler").click(function(){var dialog=$(this).attr("data-rel");if(dialog===undefined){return false}$(dialog).dialog("open");return false})},initTabs:function(setting){$(this._itemClass.tabs).each(function(){$(this).tabs(methods._getOption(this,setting))})},initProgressbar:function(setting){$(this._itemClass.progressbar).each(function(){$(this).progressbar(methods._getOption(this,setting))})},initDatepicker:function(setting){eva.loadcss(eva.s(["/lib/js/bootstrap/datepicker/datepicker.css"]));eva.loader(eva.s(methods.config.pathDatepiker),function(){$(methods._itemClass.datepicker).each(function(){$(this).datepicker()})})},initPanel:function(setting){$(this._itemClass.panel).each(function(){$(this).panel(methods._getOption(this,setting))})},initGrid:function(setting){var getWidth=function(td){var className=jQuery(td).prop("className");return parseInt(className.replace(/(.*)width_(\d+)(.*)/,"$2"),10)};$(this._itemClass.grid).each(function(){$(this).grid(methods._getOption(this),setting);$(" td, th",this).each(function(){var width=getWidth(this);if(width>0){jQuery(this).attr("width",width).css("width",width)}})})},initHtmleditor:function(setting){if(!$(this._itemClass.htmleditor)[0]){return false}var mceGlobelConfig={mode:"textareas",theme:"advanced",plugins:"autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",theme_advanced_buttons1:"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",theme_advanced_buttons2:"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",theme_advanced_buttons3:"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",theme_advanced_buttons4:"insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:true,remove_linebreaks:false,extended_valid_elements:"pre[cols|rows|disabled|name|readonly|class]",script_url:eva.s("/lib/js/tiny_mce/tiny_mce.js"),content_css:eva.s("/lib/css/typo/typo.min.css"),spellchecker_rpc_url:eva.s("/lib/js/tiny_mce/plugins/spellchecker/rpc.php")};eva.loader(eva.s(methods.config.pathTinymce),function(){$(methods._itemClass.htmleditor).each(function(){var opt=methods._getOption(this);var mceconfig=mceGlobelConfig;if(opt){for(var i in opt){mceconfig[i]=opt[i]}}mceconfig.editor_selector=this;$(this).tinymce(mceconfig)})});return false},initCodeeditor:function(){if(!$(this._itemClass.codeeditor)[0]){return false}var modeMapping={htmlmixed:["xml","css","javascript"],php:["xml","css","clike","javascript"]};eva.loadcss(eva.s(["/lib/js/codemirror/lib/codemirror.css"]));eva.loader(eva.s(methods.config.pathCodeMirror),function(){$(methods._itemClass.codeeditor).each(function(){var opt=methods._getOption(this);var mode=opt.mode;var uiItem=$(this);if(!mode){return false}var theme=opt.theme?opt.theme:"ambiance";eva.loadcss(eva.s("/lib/js/codemirror/theme/"+theme+".css"));var modePath=["/lib/js/codemirror/mode/"+mode+"/"+mode+".js"];if(modeMapping[mode]){for(var i in modeMapping[mode]){modePath.push("/lib/js/codemirror/mode/"+modeMapping[mode][i]+"/"+modeMapping[mode][i]+".js")}}var textarea=this;eva.loader(eva.s(modePath),function(){var editor=CodeMirror.fromTextArea(textarea,opt);uiItem.data("eva-ui-obj",editor)});return true})});return false},initMarkdowneditor:function(editor){var initEditor=function(mdEditor){CodeMirror.fromTextArea(mdEditor[0],{mode:"markdown",theme:"ambiance",lineNumbers:true,lineWrapping:true,onChange:function(){}})};eva.loadcss(eva.s(["/lib/js/codemirror/lib/codemirror.css","/lib/js/codemirror/theme/ambiance.css"]));eva.loader(eva.s(["/lib/js/codemirror/lib/codemirror.js","/lib/js/codemirror/mode/xml/xml.js","/lib/js/codemirror/mode/markdown/markdown.js","/lib/js/showdown/showdown.js"]),function(){converter=new Showdown.converter();$(methods._itemClass.markdowneditor).each(function(){initEditor($(this))})})},initFileuploader:function(){if(!$(this._itemClass.fileuploader)[0]){return false}eva.loadcss(eva.s(["/lib/js/upload/css/jquery.fileupload-ui.css"]));eva.loader(eva.s(methods.config.pathFileUploader),function(){});return false},_inited:false,_init:function(){for(var func in methods._itemClass){func="init"+func.charAt(0).toUpperCase()+func.substr(1);if(eva.ui[func]){eva.ui[func]()}}if(eva.ui.runtime!==undefined){eva.ui.runtime()}},init:function(){if(false===this._inited){eva.loader(eva.s(this.config.pathUiBase),this._init);this._inited=true}}};eva.ui=methods})();
