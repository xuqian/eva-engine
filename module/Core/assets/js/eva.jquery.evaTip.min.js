(function(e){var b={tip:null,tipHandler:null,tipId:"evatip",arrowVisible:true,arrowOffset:5,multiTips:false,tipContentAttr:"data-tip",content:"",autoDirection:true,x:0,y:0,offsetX:0,offsetY:0,effect:"fade",eventType:"hover",hideDelay:500,direction:"right",beforeshow:null,aftershow:null,beforehide:null,afterhide:null},a={inited:false,visible:false},f=function(g){return'<div id="'+g+'" class="tooltip hide"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'},d=null,c={init:function(g){if(this===c){return false}g=c.getOptions(g);var h=this;h.data("evaTip",g);var i=c.getTip(g);i.css("opacity","100");if(g.eventType=="click"){h.live("click",c.events.onClickTiphandler)}else{h.live({mouseenter:c.events.onMouseenterTiphandler,mouseleave:c.events.onMouseleaveTiphandler});i.live({mouseenter:c.events.onMouseenterTip,mouseleave:c.events.onMouseleaveTip})}return false},getTip:function(g){if(g.tip){return e(g.tip)}if(!g.tipId){e.error("No tip id found");return false}if(a.inited===false){e("body").append(f(g.tipId));a.inited=true}return e("#"+g.tipId)},getOptions:function(g){var h=e.extend({},b);return e.extend(h,g)},getLastHandler:function(){return d},getHandler:function(g){if(g===c){return{obj:false,left:0,top:0,width:0,height:0,content:""}}g=e(g);var j=g.offset();var i=0;var h=0;if(j){i=j.left;h=j.top}return{obj:g,width:g.outerWidth(),height:g.outerHeight(),left:i,top:h,content:g.attr("data-tip")||g.attr("title")}},show:function(p){var l=c.getHandler(this);if(false===l.obj){p=c.getOptions(p)}else{p=l.obj.data("evaTip")||c.getOptions(p)}var i=p.content||l.content;var j={top:l.top,left:l.left};if(false===l.obj){j={top:p.y,left:p.x}}var n=c.getTip(p);n.removeClass("top bottom left right");if(p.tip===null){if(!i){return false}n.find(" .tooltip-inner").html(i)}var k=n.outerWidth();var g=n.outerHeight();var m=p.direction;var h=m;switch(m){case"above":h="top";j.left+=(l.width-k)/2;j.top-=g+p.arrowOffset;break;case"right":j.left+=(l.width+p.arrowOffset);j.top+=(l.height-g)/2;break;case"left":j.left-=(k+p.arrowOffset);j.top+=(l.height-g)/2;break;case"below":h="bottom";j.left+=(l.width-k)/2;j.top+=l.height+p.arrowOffset;break;default:break}j.left+=p.offsetX;j.top+=p.offsetY;if(true===p.arrowVisible){n.addClass(h)}n.css(j);if(typeof p.beforeshow=="function"){p.beforeshow()}var o=p.effect;if(c.effects[o]){c.effects[o].show(n,p.aftershow,l)}else{c.effects.noEffect.show(n,p.aftershow,l)}return this},hide:function(g){var i=c.getHandler(this);if(false===i.obj){g=c.getOptions(g)}else{g=i.obj.data("evaTip")||c.getOptions(g)}var j=c.getTip(g);var h=g.effect;if(typeof g.beforehide=="function"){g.beforehide()}if(c.effects[h]){c.effects[h].hide(j,g.afterhide,i)}else{c.effects.noEffect.hide(j,g.afterhide,i)}return this},effects:{noEffect:{show:function(h,i,g){h.show();if(typeof i=="function"){i(h,g)}},hide:function(h,i,g){h.hide();if(typeof i=="function"){i(h,g)}}},fade:{show:function(h,i,g){i=typeof i=="function"?i:function(){};h.fadeIn("fast",i(h,g))},hide:function(h,i,g){i=typeof i=="function"?i:function(){};h.fadeOut("fast",i(h,g))}}},events:{onClickTiphandler:function(){if(e(this).data("evaTipVisible")===true){c.hide.apply(this);e(this).data("evaTipVisible",false)}else{c.show.apply(this);e(this).data("evaTipVisible",true)}return false},onMouseleaveTiphandler:function(){var g=this;d=this;var h=e(this).data("evaTipShowTimer");if(h){clearTimeout(h)}e(this).data("evaTipHideTimer",setTimeout(function(){c.hide.apply(g)},300))},onMouseenterTiphandler:function(){var g=this;d=this;var h=e(this).data("evaTipHideTimer");if(h){clearTimeout(h)}e(this).data("evaTipShowTimer",setTimeout(function(){c.show.apply(g)},300))},onMouseenterTip:function(){if(!d){return false}var h=e(this);var g=e(d).data("evaTipHideTimer");if(g){clearTimeout(g)}return false},onMouseleaveTip:function(){if(!d){return false}var h=e(d).data("evaTipShowTimer");var g=d;if(h){clearTimeout(h)}e(d).data("evaTipHideTimer",setTimeout(function(){c.hide.apply(g)},300));return false}}};e.fn.evaTip=function(g){if(c[g]){c.init();return c[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return c.init.apply(this,arguments)}else{e.error("Method "+g+" does not exist on jQuery.tooltip")}}return false};e.evaTip=c})(jQuery);
